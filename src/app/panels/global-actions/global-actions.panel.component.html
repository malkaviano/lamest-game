<div class="global-actions-panel">
  <div class="actions-header">
    <span class="actions-title">ðŸŽ® Global Actions</span>
    <button 
      mat-icon-button 
      class="collapse-toggle"
      (click)="toggleCollapse()"
      [attr.aria-label]="isCollapsed ? 'Expand global actions panel' : 'Collapse global actions panel'"
      matTooltip="{{ isCollapsed ? 'Expand' : 'Collapse' }} global actions">
      <mat-icon>{{ isCollapsed ? 'expand_more' : 'expand_less' }}</mat-icon>
    </button>
  </div>
  
  <div class="actions-content" [class.collapsed]="isCollapsed">
    <!-- Combat Options -->
    <div class="combat-options">
      <div class="dodge-option">
        <mat-checkbox
          #dodgeOption
          (change)="onChange(dodgeOption.checked)"
        ></mat-checkbox>
        <span class="option-label">Auto Dodge</span>
      </div>
    </div>

    <!-- Skill Actions -->
    <div class="skill-actions">
      <app-action-widget
        *ngIf="isVisible"
        [icon]="disguise.icon"
        [alt]="disguise.alt"
        [tooltip]="disguise.tooltip"
        [actionEvent]="disguise.actionEvent"
        (actionSelected)="actionSelected.emit($event)"
        class="skill-button"
      ></app-action-widget>

      <app-action-widget
        *ngIf="isVisible"
        [icon]="hide.icon"
        [alt]="hide.alt"
        [tooltip]="hide.tooltip"
        [actionEvent]="hide.actionEvent"
        (actionSelected)="actionSelected.emit($event)"
        class="skill-button"
      ></app-action-widget>

      <app-action-widget
        *ngIf="!isVisible"
        [icon]="visibility.icon"
        [alt]="visibility.alt"
        [tooltip]="visibility.tooltip"
        (actionSelected)="becomeVisible()"
        class="skill-button"
      ></app-action-widget>

      <app-action-widget
        [icon]="detect.icon"
        [alt]="detect.alt"
        [tooltip]="detect.tooltip"
        [actionEvent]="detect.actionEvent"
        (actionSelected)="actionSelected.emit($event)"
        class="skill-button"
      ></app-action-widget>

      <!-- Scene View Button -->
      <button
        mat-mini-fab
        color="accent"
        (click)="openScene()"
        matTooltip="View {{ scene.label }} scene"
        class="scene-button"
      >
        <mat-icon>map</mat-icon>
      </button>
    </div>
  </div>
</div>