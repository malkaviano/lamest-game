<div class="main-bar">
  <!-- Tactical Status Panel -->
  <div class="header-panel">
    <app-tactical-status-panel
      [status]="characterStatus"
      [sceneLabel]="scene.label"
    ></app-tactical-status-panel>
  </div>
  
  <!-- Global Actions Panel -->
  <div class="header-panel">
    <app-global-actions-panel
      [status]="characterStatus"
      [scene]="scene"
      (actionSelected)="actionSelected.emit($event)"
      (playerOptions)="playerOptions.emit($event)"
      (sceneOpened)="sceneOpened.emit($event)"
    ></app-global-actions-panel>
  </div>
  
  <!-- Travel Panel -->
  <div class="header-panel travel-header-panel">
    <app-travel-panel
      [panelName]="'travel'"
      [interactives]="scene.visibleInteractives"
      (actionSelected)="actionSelected.emit($event)"
    ></app-travel-panel>
  </div>
</div>

<section name="content">
  <div class="flex-panel">
    <div class="section content-box character-section">
      <!-- Character sheet -->
      <div class="character-sheet-container" data-testid="character">
        <app-sheet-panel
          [characterValues]="characterValues"
          [inventory]="inventory"
          (actionSelected)="actionSelected.emit($event)"
        ></app-sheet-panel>
      </div>

      <!-- Compact logs panel below both character and actors -->
      <div class="compact-logs-panel">
        <div class="logs-header">
          <span class="logs-title"
            >📜 Text Logs ({{ logs.items.length }} entries)</span
          >
        </div>
        <div class="compact-logs-container">
          <app-text-area-widget
            [paragraphs]="logs"
            data-testid="log"
          ></app-text-area-widget>
          <!-- Debug info -->
          <div
            *ngIf="!logs?.items || logs.items.length === 0"
            style="color: yellow; padding: 10px"
          >
            No logs available yet. Logs will appear here as actions are
            performed.
          </div>
        </div>
      </div>
    </div>

    <!-- Interactive panels in middle column -->
    <div class="section interactive-panels-section">
      <app-actors-panel
        [panelName]="'actors'"
        [interactives]="scene.visibleInteractives"
        (actionSelected)="actionSelected.emit($event)"
      ></app-actors-panel>

      <app-reactives-panel
        [panelName]="'reactives'"
        [interactives]="scene.visibleInteractives"
        (actionSelected)="actionSelected.emit($event)"
      ></app-reactives-panel>
    </div>

    <div class="section feedback-timeline-section">
      <!-- Feedback area -->
      <div class="feedback-zone">
        <div class="logs-header">
          <span class="logs-title">📣 Feedback</span>
        </div>
        <div class="panel-content">
          <!-- Toast notifications container inside panel -->
          <div id="toast-feedback-container" class="toast-feedback-container">
            <!-- Toasts will appear here -->
          </div>
          <p class="feedback-hint">
            Interactive feedback appears in this panel
          </p>
        </div>
      </div>

      <!-- Timeline area below feedback -->
      <div class="timeline-zone">
        <div class="logs-header">
          <span class="logs-title">⚔️ Combat</span>
        </div>
        <div class="panel-content">
          <app-combat-timeline-panel></app-combat-timeline-panel>
        </div>
      </div>
    </div>
  </div>
</section>
